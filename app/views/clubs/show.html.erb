<div class="min-h-screen" style="background-color: #f9fafb;">
  <div class="max-w-6xl mx-auto px-4 py-8">
    <!-- Team Header -->
    <div class="bg-white shadow-sm p-6 mb-6" style="border-radius: 12px; <%= club_card_accent_style(@club) %>">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="display: flex; align-items: center; gap: 1rem;">
          <div style="<%= club_avatar_style(@club, '40px') %>">
            <%= @club.name.split.map(&:first).join[0..3].upcase %>
          </div>
          <div>
            <h1 style="font-size: 1.25rem; font-weight: 700;"><%= @club.name %></h1>
            <p style="color: #6b7280;"><%= @club.division&.name || "5¬™ Divis√£o" %> ‚Ä¢ 4¬∫ lugar</p>
          </div>
        </div>
        <div>
          <p style="font-size: 0.875rem; color: #6b7280;"><%= t('clubs.next_match') %></p>
          <p style="font-weight: 600;">vs <span style="display:inline-block;width:20px;height:20px;background:#dc2626;border-radius:4px;margin-right:4px;"></span>-- / --</p>
        </div>
      </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem;">
      <!-- Stats -->
      <div class="bg-white shadow-sm p-6" style="border-radius: 12px;">
        <h3 class="text-lg font-semibold mb-4"><%= t('clubs.statistics') %></h3>

        <div class="mb-4">
          <div class="flex items-center justify-between">
            <span class="text-gray-600"><%= t('clubs.team_morale') %></span>
            <div class="flex items-center gap-2">
              <div class="w-24 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div class="h-full rounded-full transition-all" style="width: 75%; background-color: <%= club_primary_color(@club) %>;"></div>
              </div>
              <span class="font-semibold" style="color: <%= club_primary_color(@club) %>;">75%</span>
            </div>
          </div>
        </div>

        <div class="flex justify-between mb-4">
          <span class="text-gray-600"><%= t('clubs.overall_average') %></span>
          <span class="font-semibold">
            <% if @club.players.any? %>
              <%= ((@club.players.average(:overall) || 0) / 20).round(1) %>‚≠ê
            <% else %>
              0‚≠ê
            <% end %>
          </span>
        </div>

        <div class="flex justify-between mb-4">
          <span class="text-gray-600"><%= t('clubs.budget_label') %></span>
          <span class="font-semibold" style="color: <%= club_primary_color(@club) %>;">R$ <%= number_with_delimiter(@club.budget / 1000) %>K</span>
        </div>

        <div class="flex justify-between">
          <span class="text-gray-600"><%= t('clubs.stadium_label') %></span>
          <span class="font-semibold"><%= number_with_delimiter(@club.stadium_capacity) %></span>
        </div>

        <div style="border-top: 1px solid #e5e7eb; margin-top: 1.5rem; padding-top: 1.5rem;">
          <h4 class="font-semibold mb-4"><%= t('clubs.attributes') %></h4>
          <div class="text-sm">
            <div class="flex justify-between mb-2">
              <span><%= t('clubs.attack') %>:</span>
              <span class="font-semibold">
                <% if @club.players.any? %>
                  <%= ((@club.players.average(:attack) || 0) * 0.5).round %>
                <% else %>
                  0
                <% end %>
              </span>
            </div>
            <div class="flex justify-between mb-2">
              <span><%= t('clubs.defense') %>:</span>
              <span class="font-semibold">
                <% if @club.players.any? %>
                  <%= ((@club.players.average(:defense) || 0) * 0.5).round %>
                <% else %>
                  0
                <% end %>
              </span>
            </div>
            <div class="flex justify-between mb-2">
              <span><%= t('clubs.speed') %>:</span>
              <span class="font-semibold">
                <% if @club.players.any? %>
                  <%= ((@club.players.average(:speed) || 0) * 0.5).round %>
                <% else %>
                  0
                <% end %>
              </span>
            </div>
            <div class="flex justify-between">
              <span><%= t('clubs.stamina') %>:</span>
              <span class="font-semibold">
                <% if @club.players.any? %>
                  <%= ((@club.players.average(:stamina) || 0) * 0.5).round %>
                <% else %>
                  0
                <% end %>
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Players List -->
      <div class="bg-white shadow-sm p-6" style="border-radius: 12px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <h3 style="font-size: 1.125rem; font-weight: 600;"><%= t('clubs.formation') %></h3>
          <% if @current_lineup %>
            <%= link_to t('lineups.edit'), lineup_club_path(@club), class: "btn", style: "#{club_button_style(@club, 'primary')} font-size: 0.875rem;" %>
          <% else %>
            <%= link_to t('clubs.create_lineup'), lineup_club_path(@club), class: "btn", style: "#{club_button_style(@club, 'primary')} font-size: 0.875rem;" %>
          <% end %>
        </div>

        <% if @current_lineup %>
          <p class="text-sm text-gray-600 mb-4"><%= @current_lineup.formation %> - <%= @current_lineup.name %></p>

          <!-- Titulares -->
          <h4 class="text-sm font-semibold text-gray-600 mb-4" style="text-transform: uppercase; letter-spacing: 0.05em;"><%= t('clubs.starters') %></h4>

          <div class="mb-6">
            <% starting_players = @current_lineup.lineup_players.where(starting: true).includes(:player) %>
            <% if starting_players.any? %>
              <% starting_players.each do |lineup_player| %>
                <% player = lineup_player.player %>
                <%
                  position_text = case player.position
                                 when 'GK' then 'GOL'
                                 when 'CB' then 'ZAG'
                                 when 'LB', 'RB' then 'LAT'
                                 when 'CDM', 'CM', 'CAM' then 'MEI'
                                 when 'LW', 'RW', 'ST' then 'ATA'
                                 else player.position
                                 end

                  position_color = case position_text
                                  when 'GOL' then '#228B22'
                                  when 'ZAG', 'LAT' then '#0047AB'
                                  when 'MEI' then '#ea580c'
                                  when 'ATA' then '#dc2626'
                                  else '#6b7280'
                                  end
                %>
                <div class="player-card titular" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; border: 1px solid #22c55e; border-radius: 8px; margin-bottom: 0.5rem; transition: all 0.2s; background-color: #f0fdf4;"
                     onmouseover="this.style.borderColor='#228B22'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.borderColor='#22c55e'; this.style.boxShadow='none'">
                  <div class="player-info" style="display: flex; align-items: center; gap: 0.75rem;">
                    <span class="position-badge" style="padding: 0.25rem 0.5rem; border-radius: 4px; color: white; font-size: 0.75rem; font-weight: 600; background-color: <%= position_color %>;">
                      <%= position_text %>
                    </span>
                    <span style="font-weight: 500;"><%= player.name %></span>
                    <span style="font-size: 0.875rem; color: #6b7280;">üáßüá∑ Brasil</span>
                  </div>
                  <div class="stats" style="font-size: 0.875rem; color: #6b7280;">
                    <span>F:<%= player.strength %> E:<%= player.stamina %> V:<%= player.speed %> A:<%= player.attack %> D:<%= player.defense %> P:<%= player.passing %></span>
                    <span style="font-weight: 600; margin-left: 1rem;"><%= player.overall %>‚≠ê</span>
                  </div>
                </div>
              <% end %>
            <% else %>
              <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center text-gray-600">
                <p class="text-sm"><%= t('clubs.no_starters') %></p>
              </div>
            <% end %>
          </div>

          <!-- Reservas -->
          <h4 class="text-sm font-semibold text-gray-600 mb-4" style="text-transform: uppercase; letter-spacing: 0.05em;"><%= t('clubs.reserves') %></h4>

          <div class="mb-6">
            <% reserve_players = @current_lineup.lineup_players.where(starting: false).includes(:player) %>
            <% if reserve_players.any? %>
              <% reserve_players.each do |lineup_player| %>
                <% player = lineup_player.player %>
                <%
                  position_text = case player.position
                                 when 'GK' then 'GOL'
                                 when 'CB' then 'ZAG'
                                 when 'LB', 'RB' then 'LAT'
                                 when 'CDM', 'CM', 'CAM' then 'MEI'
                                 when 'LW', 'RW', 'ST' then 'ATA'
                                 else player.position
                                 end

                  position_color = case position_text
                                  when 'GOL' then '#228B22'
                                  when 'ZAG', 'LAT' then '#0047AB'
                                  when 'MEI' then '#ea580c'
                                  when 'ATA' then '#dc2626'
                                  else '#6b7280'
                                  end
                %>
                <div class="player-card" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 0.5rem; transition: all 0.2s;"
                     onmouseover="this.style.borderColor='#228B22'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                  <div class="player-info" style="display: flex; align-items: center; gap: 0.75rem;">
                    <span class="position-badge" style="padding: 0.25rem 0.5rem; border-radius: 4px; color: white; font-size: 0.75rem; font-weight: 600; background-color: <%= position_color %>;">
                      <%= position_text %>
                    </span>
                    <span style="font-weight: 500;"><%= player.name %></span>
                    <span style="font-size: 0.875rem; color: #6b7280;">üáßüá∑ Brasil</span>
                  </div>
                  <div class="stats" style="font-size: 0.875rem; color: #6b7280;">
                    <span>F:<%= player.strength %> E:<%= player.stamina %> V:<%= player.speed %> A:<%= player.attack %> D:<%= player.defense %> P:<%= player.passing %></span>
                    <span style="font-weight: 600; margin-left: 1rem;"><%= player.overall %>‚≠ê</span>
                  </div>
                </div>
              <% end %>
            <% else %>
              <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center text-gray-600">
                <p class="text-sm"><%= t('clubs.no_reserves') %></p>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center text-gray-600 mb-6">
            <div class="w-12 h-12 mx-auto bg-gray-200 rounded-full flex items-center justify-center text-gray-500 mb-3"><%= football_icon(size: '1.5rem') %></div>
            <p class="mb-4 text-sm"><%= t('clubs.no_current_lineup') %></p>
          </div>
        <% end %>

        <!-- Action Buttons -->
        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
          <button class="btn" style="<%= club_button_style(@club, 'primary') %> flex: 1;"><%= t('clubs.view_transfers') %></button>
          <button class="btn" style="<%= club_button_style(@club, 'secondary') %> flex: 1;"><%= t('clubs.history') %></button>
          <button class="btn" style="<%= club_button_style(@club, 'outline') %> flex: 1;"><%= t('clubs.stats') %></button>
        </div>
      </div>
    </div>
  </div>
</div>